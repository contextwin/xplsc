git clone https://github.com/contextwin/xplsc

Ubuntu + xfce4環境で自動的に画面がロックされたりスリープされたりする原因になる設定を調査するシェルスクリプト

chmod +X xplsc.sh

./xplsc.sh
で実行

1. Xfce4の電源管理設定
設定場所: Settings Manager → Power Manager
確認項目:
	"Put display to sleep when computer is inactive for" の設定
	"Lock screen when system is going for sleep" のチェック状態
	AC電源/バッテリー使用時の異なる設定

2. スクリーンセーバー設定
設定場所: Settings Manager → Screensaver
確認項目:
	スクリーンセーバーの有効/無効
	待機時間の設定
	"Lock screen when screensaver is active" のチェック状態

3. ライトロッカー（Light Locker）
	Xfce4のデフォルトスクリーンロッカー
	ps aux | grep light-locker	

4. システムレベルの電源管理
systemd の設定
	systemctl status systemd-logind
	cat /etc/systemd/logind.conf
主な設定項目:
	IdleAction
	IdleActionSec

5. 他の電源管理ツールとの競合
	確認すべきプロセス
	ps aux | grep -E "(gnome-screensaver|xscreensaver|pm-|acpi)"

6. ハードウェア関連
	ACPI設定の問題
	グラフィックドライバーの問題
	電源ボタンやリッドスイッチの誤検出

対処法の優先順位
	Xfce4 Power Manager の設定確認

===========================================================

Ubuntu + Xfce4で画面が勝手にスリープ・ロックされる主な原因は以下の通りです：
電源管理の設定
Xfce4には電源管理機能があり、一定時間操作がないと自動的に画面をオフにしたり、システムをスリープ状態にする設定があります。AC電源使用時とバッテリー使用時で異なる設定になっている場合もあります。
スクリーンセーバー機能
指定した時間が経過すると自動的にスクリーンセーバーが起動し、同時に画面ロックがかかる設定になっていることがあります。
ライトロッカーの動作
Xfce4では「Light Locker」というツールが画面ロック機能を担当しており、これが予期しないタイミングで動作している可能性があります。
システム全体の電源管理
Ubuntu自体にもsystemdという仕組みを使った電源管理機能があり、これがXfce4の設定とは別に動作している場合があります。
複数ツールの競合
過去にGNOMEや他のデスクトップ環境を使用していた場合、それらの電源管理ツールが残っていてXfce4の設定と競合している可能性があります。
ハードウェアの問題
ノートパソコンの場合、電源ボタンやディスプレイを閉じるセンサーが誤動作して、意図しないタイミングでスリープやロックが発生することがあります。
最も多いのは電源管理設定とスクリーンセーバー設定の問題です。設定を確認して適切に調整すれば解決することが多いです。

===============================================================

Ubuntu + Xfce4で画面スリープ・ロック設定の無効化を永続的にするには、以下の方法があります：
1. Xfce4設定の永続化
設定マネージャーで変更した電源管理やスクリーンセーバーの設定は、通常は自動的に保存されます。ただし、設定ファイルが正しく書き込まれているかを確認する必要があります。
2. Light Lockerの完全無効化
一時的に無効化しただけの場合、再起動すると復活します。完全に無効化するには：

システム起動時にLight Lockerが自動起動しないよう設定
または、Light Lockerをアンインストール

3. 自動起動アプリケーションの管理
Xfce4の「セッションと起動」設定で、電源管理関連のアプリケーションが自動起動リストに含まれている場合は、それらを無効化する必要があります。
4. systemd設定の固定化
システムレベルで電源管理を無効化した場合、設定ファイルを編集して永続化する必要があります。
5. 設定ファイルの権限確保
ユーザーの設定ディレクトリ（~/.config/）にある設定ファイルが適切な権限で保存されていることを確認します。
注意点

設定を変更した後は必ず再起動して、設定が維持されているか確認してください
バックアップとして、現在の設定をメモしておくことをお勧めします
アップデート後に設定が初期化される場合があるので、定期的な確認が必要です
